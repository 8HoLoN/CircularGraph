<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Circular Graph</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">


  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
  <style type="text/css">
    #GraphCanvas{
      width: 305px;
      height: 305px;
      border: 0px solid #d3d3d3;
      margin: 20px;
    }

    @media(max-width:767px){
      body{
        margin-bottom:10px;
      }
      .container{
        padding-right: 5px;
        padding-left: 5px;
      }
      #GraphCanvas{
        margin:0px;
      }
    }
    @media(min-width:768px){}
    @media(min-width:992px){}
    @media(min-width:1200px){}
  </style>
</head>
<body class="container">

<div class="text-center">
  <div ><a class="label label-primary" href="http://8holon.github.io/">8holon.github.io</a></div>
  <h1>Circular Multiplication Graph</h1>
  <div class="col-lg-6 col-lg-offset-3">
    <input id='displayPoints' type="checkbox" />
    <label for='displayPoints' >Display points</label>
    <input id='animateCheckbox' type="checkbox" />
    <label for='animateCheckbox' >Animate</label>
  </div>
  <canvas id="GraphCanvas" width="305" height="305" >
  Your browser does not support the HTML5 canvas tag.</canvas>
  <div class="col-lg-6 col-lg-offset-3">
    <label>Cardinality : </label>
    <input id='pointsNumber' type="number" style="width:70px;"/>
    <input id="cardinalityRange" type="range" min="0" max="500" step="1" />
    <!-- 2000 -->
  </div>

  <!--<div class="center-block" style="width:500px;">-->
  <div class="col-lg-6 col-lg-offset-3">
    <label>Coefficient : </label>
    <input id='coeffNumber' type="number" max="250" step="0.01" style="width:70px;"/>
    <input id="coeffRange" type="range" min="0" max="250" step="1" />
    <!-- 2000 -->

  </div>

</div>

<script type="text/javascript" src="CircularGraph.js"></script>
<script type="text/javascript">
  ;(function(){
    'use strict';

    var circularGraph = new CircularGraph({
        canvas:document.getElementById("GraphCanvas"),
        cardinality:414,
        coeffBase:205,
        radius:150,
        isDisplayingMarks:!true,
        isDisplayingCircle:!true
      });

    circularGraph.draw();
    document.getElementById('pointsNumber').value = circularGraph.cardinality;
    document.getElementById('coeffNumber').value = circularGraph.coeffBase;

    var cardinalityRange = document.getElementById('cardinalityRange');
    cardinalityRange.value = circularGraph.cardinality;
    cardinalityRange.addEventListener('input',function(_i,_j){
      document.getElementById('pointsNumber').value = this.value;
      circularGraph.setCardinality(this.value);
      circularGraph.draw();
    },false);

    var coeffRange = document.getElementById('coeffRange');
    coeffRange.value = circularGraph.coeffBase;
    coeffRange.addEventListener('input',function(_i,_j){
      document.getElementById('coeffNumber').value = this.value;
      circularGraph.setCoeffBase(this.value);
      circularGraph.draw();
    },false);

    var pointsNumber = document.getElementById('pointsNumber');
    pointsNumber.addEventListener('input',function(_i,_j){
      document.getElementById('cardinalityRange').value = this.value;
      circularGraph.setCardinality(this.value);
      circularGraph.draw();
    },false);

    var coeffNumber = document.getElementById('coeffNumber');
    coeffNumber.addEventListener('input',function(_i,_j){
      document.getElementById('coeffRange').value = this.value;
      circularGraph.setCoeffBase(this.value);
      circularGraph.draw();
    },false);

    var displayPoints = document.getElementById('displayPoints');
    displayPoints.addEventListener('change',function(_i,_j){
      circularGraph.displayingMarks(this.checked);
      circularGraph.draw();
    },false);

    var animateTimerHandler = null;
    var animateCheckbox = document.getElementById('animateCheckbox');
    animateCheckbox.addEventListener('change',function(_i,_j){
      if( this.checked ){
        animateTimerHandler = setInterval(function(){
          animate();
        },1000/60);
      }else{
        clearInterval(animateTimerHandler);
      }

    },false);

    function animate () {
      var _value = document.getElementById('coeffNumber').value;
      _value=parseFloat(_value)+0.002;
      circularGraph.setCoeffBase(_value);
      document.getElementById('coeffNumber').value = _value;
      document.getElementById('coeffRange').value = _value;
      circularGraph.draw();
    }

  })();

</script>
</body>
</html>
